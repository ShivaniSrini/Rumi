<!DOCTYPE html> 
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
        
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background-color: #F5F1EA;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #8FAA9D;
      color: white;
      padding: 20px 40px;
      text-align: center;
      font-size: 28px;
      letter-spacing: 1px;
    }
    main {
      padding: 40px;
      text-align: center;
    }
    .new-habit-btn {
      background: linear-gradient(135deg, #A8C0A0, #B4C6A6, #9EB89E);
      border: none;
      color: #fff;
      padding: 14px 28px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 18px;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    }
    .home {
      background: linear-gradient(135deg, #A8C0A0, #B4C6A6, #9EB89E);
      border: none;
      color: #fff;
      padding: 14px 28px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 18px;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    }
    
    .new-habit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 5;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.3);
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background-color: #FAF7F2;
      border-radius: 12px;
      width: 380px;
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      text-align: left;
    }
    label { display: block; margin-top: 15px; font-weight: 600; }
    input, textarea, select {
      width: 100%;
      margin-top: 6px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #B4C6A6;
      background: #ffffff;
      box-sizing: border-box;
      font-family: inherit;
    }
    .form-actions {
      margin-top: 25px;
      text-align: right;
    }
    .form-actions button {
      background: #8FAA9D;
      color: white;
      border: none;
      padding: 10px 18px;
      border-radius: 8px;
      cursor: pointer;
      margin-left: 10px;
    }
    .form-actions button.cancel {
      background: #B4C6A6;
    }
    
    .container {
  	display: flex;
  	height: 100vh;
	}
	
	/* Sidebar styling */
	.sidebar {
	  width: 230px;
	  background: #C9A8A0;
	  padding: 25px;
	  display: flex;
	  flex-direction: column;
	  align-items: flex-start;
	  box-shadow: 2px 0 6px rgba(0,0,0,0.1);
	}
	
	/* Sidebar heading */
	.sidebar h2 {
	  margin-bottom: 5px;
	}
	
	.sidebar p {
	  font-size: 12px;
	  margin-bottom: 20px;
	  color: #555;
	}
	
	/* Make buttons stack vertically */
	.sidebar nav {
	  display: flex;
	  flex-direction: column;
	  width: 100%;
	}
	
	.sidebar a {
	  width: 100%;
	  margin: 6px 0;
	  padding: 10px;
	  border: none;
	  background: #D6D6D6;
	  border-radius: 10px;
	  cursor: pointer;
	  text-align: left;
	  font-weight: 500;
	  transition: background 0.2s;
	  text-decoration: none;
	  color: black;
	}
	
	.sidebar a:hover {
	  background: #C99B8A;
	}
	
	/* Right calendar container */
	.right-panel {
	  width: 500px;
	  height: 500px;
	  padding: 20px;
	  border-left: 1px solid #ccc;
	  display: flex;
	  flex-direction: column;
	  align-items: center;
	}
	
	.right-panel h3 {
	  margin-bottom: 10px;
	  font-size: 18px;
	  color: #333;
	}
	
	.achievement-box {
	  background: white;
	  border-radius: 10px;
	  margin-top: 25px;
	  padding: 15px;
	  width: 300px;
	  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
	  text-align: center;
	}
	
	.achievement-box h3 {
	  font-size: 16px;
	  margin-bottom: 10px;
	  color: #333;
	}
	
	.achievement-content {
	  font-size: 14px;
	  color: #777;
	}
	
	
	.calendar-box {
	  background: white;
	  border-radius: 10px;
	  padding: 10px;
	  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
	  width: 300px;
	  height: 300px;
	  overflow:hidden;
	  align-items: center;
	}
	
	.calendar-box input {
	  border: 1px solid #ccc;
	  border-radius: 6px;
	  padding: 8px;
	  font-size: 14px;
	  width: 100%;
	  cursor: pointer;
	}
	
	#calendar {
	  width: 100%;
	}
	
	.flatpickr-calendar {
	  background: white;
	  border-radius: 10px;
	  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
	  font-size: 14px;
	}
		
  </style>
</head>
<body>

   <div class="container">

    <!-- Sidebar menu -->
    <aside class="sidebar">
      <h2>Rumi</h2>
      <p>Reflect, Understand, Maintain & Improve</p>
      <nav>
        <!-- âœ… Updated buttons to Thymeleaf links -->
        <a th:href="@{/dashboard}">Dashboard</a>
        <a th:href="@{/habits}">Habits</a>
        <a th:href="@{/journal}">Journal</a>
        <a th:href="@{/analytics}">Analytics</a>
        <a th:href="@{/checkin}">Daily Check-In</a>
        <a th:href="@{/shop}">Shop</a>
        <a th:href="@{/friends}">Friends</a>
      </nav>
    </aside>
    
  
  <!-- Calendar box on the right -->
  <aside class="right-panel">
    
    <!-- + New Habit Button -->
    <button class="new-habit-btn" id="openModalBtn">+ New Habit</button>
    
    <div class="calendar-box">
    <h3>Calendar</h3>
      <div id="calendar"></div>
   </div>   
      <!--Achievement box on the bottom right -->
    
    <div class="achievement-box">
    <h3>Achievements</h3>
    <div class="achievement-content">
      <p>No achievements yet!</p>
    </div>
  </div>
  </aside>

  </div>

  <!-- Habit Modal -->
  <div class="modal" id="habitModal">
    <div class="modal-content">
      <h2>Create New Habit</h2>
      <form th:action="@{/habits/new}" method="post">
        <label>Title</label>
        <input type="text" name="title" required>

        <label>Description</label>
        <textarea name="description" rows="3" required></textarea>

        <label>Duration</label>
        <div style="display: flex; gap: 10px;">
          <select id="hours" name="hours" required></select>
          <select id="minutes" name="minutes" required></select>
        </div>

        <div class="form-actions">
          <button type="button" class="cancel" id="closeModalBtn">Cancel</button>
          <button type="submit">Save</button>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      flatpickr("#calendar", {
        inline: true,
        dateFormat: "Y-m-d",
        defaultDate: "today"
      });

      const modal = document.getElementById('habitModal');
      const openBtn = document.getElementById('openModalBtn');
      const closeBtn = document.getElementById('closeModalBtn');

      openBtn.onclick = () => modal.style.display = 'flex';
      closeBtn.onclick = () => modal.style.display = 'none';
      window.onclick = e => { if (e.target === modal) modal.style.display = 'none'; };

      const hourSelect = document.getElementById('hours');
      const minuteSelect = document.getElementById('minutes');

      for (let i = 0; i <= 12; i++) {
        const opt = document.createElement('option');
        opt.value = i;
        opt.textContent = `${i} hour${i !== 1 ? 's' : ''}`;
        hourSelect.appendChild(opt);
      }

      for (let i = 0; i < 60; i += 1) {
        const opt = document.createElement('option');
        opt.value = i;
        opt.textContent = `${i} min`;
        minuteSelect.appendChild(opt);
      }
    });
  </script>
</body>
</html>

